{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./es2015/ResourceManager.js","webpack:///./es2015/Renderer.js","webpack:///./es2015/Label.js","webpack:///./es2015/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","ResourceManager","_classCallCheck","this","resources","loaded","loadingComplete","_resource","_type","_name","callback","res","resource","path","type","src","undefined","nodeType","source","Image","push","onload","loadImg","Audio","loadAudio","complete","width","length","setTimeout","audio","timeOut","clearTimeout","self","readyState","Renderer","canvas","Renderer_classCallCheck","renderList","context","getContext","height","clearRect","sort","a","b","bg","bgIndex","ui","uiIndex","pos","z","id","curObject","visible","render","list","indexOf","splice","Label","options","Label_classCallCheck","text","font","x","y","color","live","deltaTime","fillStyle","fillText","Jest","es2015_classCallCheck","renderCanvas","frameRate","Math","ceil","showFrameRate","stateName","states","currentState","renderer","entities","intervalId","lastTime","Date","now","accTime","timeStep","bounds","frameRateLabel","resourceManager","hitEntities","particleCount","utilities","focused","keys","game","init","curTime","update","entLen","removeEntity","redraw","round","currentFrameRate","requestAnimationFrame","document","getElementById","createElement","draggable","addEventListener","event","target","clicked","mouseMove","mouseDown","mouseUp","preventDefault","mouseWheel","keyDown","keyUp","addState","switchState","addEntity","mouseX","mouseY","moused","leftDown","rightDown","midDown","keyCode","cX","cY","pageX","pageY","changedTouches","clientX","body","scrollLeft","documentElement","clientY","scrollTop","offsetLeft","offsetTop","entity","clickable","origin","noClickThrough","clickX","clickY","clientLeft","clientTop","which","mdX","mdY","mouseDownX","mouseDownY","dir","abs","wheelDelta","detail","renderFalse","state","foundState","getState","entityList","addToRenderer","item","kill","removeFromRenderer","enterState","exitState","stateObj","len","exitTransition","exitComplete","Game","Transition","enterTransition"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export default class ResourceManager{\r\n    constructor(){\r\n        this.resources = [];\r\n        this.loaded = 0;\r\n        this.loadingComplete = true;\r\n    }\r\n    /**\r\n     * Resourcemanager.add(_resource, _type)\r\n     * object resource, String/Number, String\r\n     * adds a new resource for use and begins the process of loading\r\n     **/\r\n    add(_resource, _type, _name){\r\n        var resource = {'path' : _resource, 'type' : _type, 'name' : _name};\r\n\r\n        // if the resource is an existing image\r\n        if(_resource.src){\r\n            resource.path = _resource.src;\r\n        }\r\n\r\n        this.loadingComplete = false;\r\n\r\n        if(_name === undefined){\r\n            _name = \"\";\r\n        }\r\n\r\n        if(_type == 1 || _type == \"img\" || _type === null){\r\n            if(_resource.nodeType === 1){\r\n                resource.source = _resource;\r\n            }else{\r\n                resource.source = new Image();\r\n            }\r\n\r\n            this.resources.push({resource : resource, name : _name});\r\n            resource.source.onload = function(callback, res){resource.loaded = true; callback.loadImg(callback, res);}(this, resource);\r\n\r\n            if(_resource.nodeType === 1){\r\n                resource.source.src = _resource.src;\r\n            }else{\r\n                resource.source.src = _resource;\r\n            }\r\n\r\n        }else if(_type == 2 || _type == \"audio\"){\r\n            resource.source = new Audio();\r\n            this.resources.push({resource : resource, name : _name});\r\n            this.loadAudio(resource);\r\n            resource.source.src = _resource;\r\n        }\r\n\r\n        return resource;\r\n    }\r\n    /**\r\n     * Resourcemanager.loadImg()\r\n     * object event\r\n     * reports when an image is loaded\r\n     **/\r\n    loadImg(callback, resource){\r\n        if(resource.source.complete && resource.source.width){\r\n            callback.loaded++;\r\n\r\n            if(callback.loaded === callback.resources.length){\r\n                callback.loadingComplete = true;\r\n            }\r\n        }else{\r\n            setTimeout(function(){callback.loadImg(callback, resource);},10);\r\n        }\r\n    }\r\n    /**\r\n     * Resourcemanager.loadAudio(audio)\r\n     * object audio resource\r\n     * reports when audio is loaded\r\n     **/\r\n    loadAudio(audio,timeOut){\r\n        clearTimeout(timeOut);\r\n        timeOut = 0;\r\n\r\n        var self = this;\r\n\r\n        if (audio.source.readyState > 0) {\r\n            this.loaded++;\r\n\r\n            if(this.loaded === this.resources.length){\r\n                this.loadingComplete = true;\r\n            }\r\n        } else {\r\n            timeOut = setTimeout(function(){self.loadAudio(audio, timeOut);}, 100);\r\n        }\r\n    }\r\n    /**\r\n     * Resourcemanager.getResource(name)\r\n     * string/text\r\n     * returns the resource by name if found\r\n     **/\r\n     getResource(_name){\r\n        var resources = this.resources;\r\n\r\n        for(var i = 0, l = resources.length; i < l; i++){\r\n            if(resources[i].name == _name){\r\n                return resources[i].resource;\r\n            }\r\n        }\r\n     }\r\n}\r\n","export default class Renderer{\r\n    constructor(canvas) {\r\n        this.renderList  = [];\r\n        this.canvas    = canvas;\r\n        this.context   = this.canvas.getContext(\"2d\");\r\n        this.width     = this.canvas.width;\r\n        this.height    = this.canvas.height;\r\n    }\r\n    // Todo: I dont like this. fix the sorting, right now sorts on y, but could potentially sort based on z\r\n    redraw() {\r\n        this.context.clearRect(0,0,this.width,this.height);\r\n        //this.renderList.sort(function(a,b){return b.y-a.y});\r\n\r\n        this.renderList.sort(function(a,b){\r\n            if(a.bg && b.bg){\r\n                return b.bgIndex - a.bgIndex;\r\n            }else if(a.ui && b.ui){\r\n                return b.uiIndex - a.uiIndex;\r\n            }else if(a.bg || b.ui){\r\n                return 1;\r\n            }else if(b.bg || a.ui){\r\n                return -1;\r\n            }else if(a.pos && b.pos){\r\n                return b.pos.z - a.pos.z;\r\n            }\r\n            return 0;\r\n        });\r\n\r\n        var id =  this.renderList.length;\r\n\r\n        while(id--){\r\n            var curObject = this.renderList[id];\r\n            if(curObject.visible){\r\n                curObject.render(this.context);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Renderer.addToRenderer(object)\r\n     *\r\n     * add a new item to the renderer\r\n     **/\r\n    addToRenderer(object) {\r\n        this.renderList.push(object);\r\n    }\r\n    /**\r\n     * Renderer.removeFromRenderer(object)\r\n     *\r\n     * remove an item from the renderer\r\n     **/\r\n    removeFromRenderer(object) {\r\n        var list = this.renderList,\r\n            objIndex = list.indexOf(object);\r\n\r\n        if(objIndex !== -1){\r\n            list.splice(list.indexOf(object), 1);\r\n        }\r\n    }\r\n}\r\n","export default class Label{\r\n    constructor(options){\r\n        options = options || {};\r\n        this.text = options.text || \"Undefined Label Text\";\r\n        this.font = options.font || \"1em Arial\";\r\n\r\n        this.pos = {x : 0, y : 0};\r\n        this.pos.x = options.x || 0;\r\n        this.pos.y = options.y || 0;\r\n        this.pos = options.pos || {x : this.pos.x, y : this.pos.y};\r\n        this.color = options.color || \"#fff\";\r\n\r\n        this.x = this.pos.x;\r\n        this.y = this.pos.y;\r\n\r\n        this.live = true;\r\n        this.visible = true;\r\n    }\r\n    update(deltaTime) {}\r\n    // Draw the label\r\n    render(context) {\r\n        context.fillStyle = this.color;\r\n        context.font = this.font;\r\n        context.fillText(this.text, this.pos.x, this.pos.y);\r\n    }\r\n}","import ResourceManager from './ResourceManager';\r\nimport Renderer from './Renderer';\r\nimport Label from './Label';\r\n\r\nexport default class Jest {\r\n    constructor(options) {\r\n        options = options || {};\r\n        this.renderCanvas = options.canvas || \"playCanvas\";\r\n        this.width = options.width || 320;\r\n        this.height = options.height || 240;\r\n        this.frameRate = options.frameRate || Math.ceil(1000/60);\r\n        this.showFrameRate = options.showFrameRate || false;\r\n        this.stateName = options.stateName || \"0\";\r\n\r\n        // State info\r\n        this.states = [];\r\n        this.currentState = {};\r\n\r\n        // Render stuff\r\n        this.renderer = {};\r\n        this.renderList = [];\r\n        this.entities = [];\r\n\r\n        // Timing\r\n        this.intervalId = {};\r\n        this.lastTime = Date.now();\r\n        this.accTime = 0;\r\n        this.timeStep = 1;\r\n\r\n        // game bounds\r\n        this.bounds = {x: 0, y: 0, width : this.width, height : this.height};\r\n\r\n        // used to show the fps\r\n        this.frameRateLabel = {};\r\n\r\n        // init the utilities and resource manager\r\n        this.resourceManager = new ResourceManager();\r\n\r\n        // List of entities in a recent collision\r\n        this.hitEntities = [];\r\n\r\n        // Keep track of how many particles we have on screen\r\n        this.particleCount = 0;\r\n\r\n        Jest.frameRate = this.frameRate;\r\n        Jest.bounds = this.bounds;\r\n        Jest.particleCount = this.particleCount;\r\n        Jest.utilities = this.utilities;\r\n        Jest.states = this.states;\r\n        Jest.currentState = this.currentState;\r\n        Jest.focused = true;\r\n        Jest.keys = [];\r\n    }\r\n       /**\r\n     * Jest.load()\r\n     *\r\n     * prepares the canvas for rendering, and starts the update process\r\n     **/\r\n    load(){\r\n        this.loaded( this );\r\n    }\r\n    /**\r\n     * Jest.loaded()\r\n     * object event\r\n     * makes sure everything is loaded until continuing\r\n     **/\r\n    loaded(game){\r\n        var self = this;\r\n        if(this.resourceManager.loadingComplete){\r\n            game.init();\r\n            return true;\r\n        }else{\r\n            setTimeout(function(){ self.loaded(game); } , 100);\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Jest.update()\r\n     *\r\n     * Main update loop for the game, updates all objects, and calls the renderer.\r\n     **/\r\n    update(){\r\n        var curTime = Date.now(),\r\n            update = this.update;\r\n\r\n        this.deltaTime = curTime - this.lastTime;\r\n        this.lastTime = curTime;\r\n        this.accTime += this.deltaTime;\r\n\r\n        // Limit the delta queing\r\n        if(this.accTime > 60){\r\n            this.accTime = 0;\r\n        }\r\n\r\n        while (this.accTime > this.timeStep)\r\n        {\r\n            this.accTime -= this.timeStep;\r\n            var entities = this.entities,\r\n                entLen = this.entities.length;\r\n\r\n            while(entLen--){\r\n                var object = entities[entLen];\r\n                if(object !== undefined){\r\n                    if(object.live){\r\n                        object.update(this.timeStep / 100);\r\n                    }else{\r\n                        this.removeEntity(object);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        this.renderer.redraw();\r\n        this.frameRateLabel.text = Math.round(1000 / this.deltaTime) + \" fps\";\r\n        this.currentFrameRate =  Math.round(1000 / this.deltaTime);\r\n\r\n        var self = this;\r\n        requestAnimationFrame( function(){self.update();} );\r\n    }\r\n    /**\r\n     * Jest.init()\r\n     *\r\n     * prepares the canvas for rendering, and starts the update process\r\n     **/\r\n    init() {\r\n        // base for starting, presetup ect.\r\n        var self = this;\r\n\r\n        this.renderCanvas = document.getElementById(this.renderCanvas);\r\n\r\n        if(this.renderCanvas === null){\r\n            this.renderCanvas = document.createElement(\"canvas\");\r\n        }\r\n\r\n        // disable dragging\r\n        this.renderCanvas.draggable = false;\r\n\r\n        // determine if the game has the focus or not\r\n        document.addEventListener(\"touchstart\", function(event){\r\n            if(event.target !== self.renderCanvas){\r\n                Jest.focused = false;\r\n            }else{\r\n                Jest.focused = true;\r\n            }});\r\n\r\n        //this.renderCanvas.addEventListener('touchstart', function(event){Jest.focused = true; self.clicked(event,self);}, false);\r\n        this.renderCanvas.addEventListener('click', function(event){Jest.focused = true; self.clicked(event,self);}, false);\r\n        this.renderCanvas.addEventListener('mousemove', function(event){self.mouseMove(event,self);}, false);\r\n        this.renderCanvas.addEventListener('mousedown', function(event){self.mouseDown(event,self);}, false);\r\n        this.renderCanvas.addEventListener('mouseup', function(event){self.mouseUp(event,self);}, false);\r\n\r\n        this.renderCanvas.addEventListener('contextmenu', function(event){event.preventDefault();}, false);\r\n\r\n        // mousewheel\r\n        this.renderCanvas.addEventListener (\"mousewheel\", function(event){self.mouseWheel(event,self);}, false);\r\n        this.renderCanvas.addEventListener (\"DOMMouseScroll\", function(event){self.mouseWheel(event,self);}, false);\r\n\r\n        // keypress\r\n        document.addEventListener(\"keydown\", function(event){if(Jest.focused){self.keyDown(event,self);}}, false);\r\n        document.addEventListener(\"keyup\", function(event){if(Jest.focused){self.keyUp(event,self);}}, false);\r\n\r\n        this.renderCanvas.width = this.width;\r\n        this.renderCanvas.height = this.height;\r\n\r\n        this.renderer = new Renderer(this.renderCanvas);\r\n\r\n        this.addState(this.stateName);\r\n        this.switchState({'id' : 0});\r\n\r\n        // setup a label to display the frameRate\r\n        if(this.showFrameRate){\r\n            this.frameRateLabel = new Label({'text':' ', x:0,y:30,z:1, 'font':'14pt arial bold'});\r\n            this.addEntity(this.frameRateLabel);\r\n        }\r\n\r\n        this.mouseX = 0;\r\n        this.mouseY = 0;\r\n\r\n        this.moused = false;\r\n        this.leftDown = false;\r\n        this.rightDown = false;\r\n        this.midDown = false;\r\n\r\n        this.update();\r\n    }\r\n    /**\r\n     * Jest.getKey()\r\n     * returns the state of a key\r\n     **/\r\n    getKey(key){\r\n        //todo: add logic to return the state of the key, get the keycode based off of thekey passed\r\n        return Jest.keys[key];\r\n    }\r\n    /**\r\n     * Jest.keyDown()\r\n     * sets the state of the key pressed to true\r\n     **/\r\n    keyDown(event, self){\r\n        Jest.keys[event.keyCode] = true;\r\n    }\r\n    /**\r\n     * Jest.keyUp()\r\n     * sets the state of the key pressed to false\r\n     **/\r\n    keyUp(event, self){\r\n        Jest.keys[event.keyCode] = false;\r\n    }\r\n    /**\r\n     * Jest.clicked()\r\n     * object event\r\n     * handles the click event for the canvas\r\n     * TODO update this, I dont like how it requires origin and pos\r\n     **/\r\n    clicked(event, self){\r\n        this.cX = 0;\r\n        this.cY = 0;\r\n\r\n        if (event.pageX || event.pageY) {\r\n            this.cX = event.pageX;\r\n            this.cY = event.pageY;\r\n        }\r\n        else if(event.changedTouches){\r\n            this.cX = event.changedTouches[0].pageX;\r\n            this.cY = event.changedTouches[0].pageY;\r\n        }\r\n        else {\r\n            this.cX = event.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n            this.cY = event.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n        }\r\n\r\n        this.cX -= self.renderCanvas.offsetLeft;\r\n        this.cY -= self.renderCanvas.offsetTop;\r\n\r\n        var id = self.entities.length,\r\n            entities = self.entities;\r\n\r\n        while(id--){\r\n            var entity = entities[id];\r\n            if(entity.clickable && entity.pos && entity.origin){\r\n                if(this.cX > entity.pos.x-entity.origin.x && this.cX < (entity.pos.x-entity.origin.x)+entity.width && this.cY > entity.pos.y-entity.origin.y && this.cY < (entity.pos.y-entity.origin.y)+entity.height){\r\n                    entity.clicked();\r\n                    if(entity.noClickThrough){\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return {'clickX' : this.cX, 'clickY' : this.cY};\r\n    }\r\n    /**\r\n     * Jest.mouseMove()\r\n     * object event\r\n     * handles the mouse move event\r\n     **/\r\n    mouseMove(event, self){\r\n        if(event.pageX ||event.pageY){\r\n            self.mouseX = event.pageX - self.renderCanvas.offsetLeft;\r\n            self.mouseY = event.pageY - self.renderCanvas.offsetTop;\r\n        }else{\r\n            self.mouseX = (event.clientX + document.body.scrollLeft - document.body.clientLeft) - self.renderCanvas.offsetLeft;\r\n            self.mouseY = (event.clientY + document.body.scrollTop  - document.body.clientTop) - self.renderCanvas.offsetTop;\r\n        }\r\n    }\r\n    mouseDown(event, self){\r\n        self.moused = true;\r\n        if ('which' in event) {\r\n            switch (event.which) {\r\n            case 1:\r\n                self.leftDown = true;\r\n                break;\r\n            case 2:\r\n                self.midDown = true;\r\n                break;\r\n            case 3:\r\n                self.rightDown = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        this.mdX = 0;\r\n        this.mdY = 0;\r\n\r\n        if (event.pageX || event.pageY) {\r\n            this.mdX = event.pageX;\r\n            this.mdY = event.pageY;\r\n        }\r\n        else {\r\n            this.mdX = event.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n            this.mdY = event.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n        }\r\n\r\n        this.mdX -= self.renderCanvas.offsetLeft;\r\n        this.mdY -= self.renderCanvas.offsetTop;\r\n\r\n        var id = self.entities.length,\r\n            entities = self.entities;\r\n\r\n        while(id--){\r\n            var entity = entities[id];\r\n            if(entity.clickable && entity.pos && entity.origin){\r\n                if(this.mdX > entity.pos.x-entity.origin.x && this.mdX < (entity.pos.x-entity.origin.x)+entity.width && this.mdY > entity.pos.y-entity.origin.y && this.mdY < (entity.pos.y-entity.origin.y)+entity.height){\r\n                    entity.mouseDown();\r\n                }\r\n            }\r\n        }\r\n\r\n        return {'mouseDownX' : this.mdX, 'mouseDownY' : this.mdY};\r\n    }\r\n    mouseUp(event, self){\r\n        self.moused = false;\r\n        self.leftDown = false;\r\n        self.midDown = false;\r\n        self.rightDown = false;\r\n    }\r\n    mouseWheel(event, self){\r\n        var dir = 0;\r\n        if ('wheelDelta' in event) {\r\n            if(Math.abs(event.wheelDelta) - event.wheelDelta === 0){\r\n                dir = -1;\r\n            }else{\r\n                dir = 1;\r\n            }\r\n        }else if (event.detail) {\r\n            if(Math.abs(event.detail) - event.detail === 0){\r\n                dir = 1;\r\n            }else{\r\n                dir = -1;\r\n            }\r\n        }\r\n\r\n        return dir;\r\n    }\r\n    // Handles Entities\r\n\r\n    /**\r\n     * Jest.addEntity()\r\n     * object entity, renderFalse bool, state object\r\n     * renderFalse : controls if the item is added to the renderer.. idk this is kind of hack, basically its for things you want in the\r\n     * main update loop but doesn't render at all, so like a container\r\n     * state {name : string, OR id : number}: allows you to specify what state you want to add the entity to, if you dont specify it adds it to the current state\r\n     **/\r\n    addEntity(object, renderFalse, state){\r\n        // add the live prop since the renderer/update chooses to display or update based on it\r\n        if(!(\"live\" in object)){\r\n            object.live = true;\r\n        }\r\n\r\n        this.renderFalse = renderFalse;\r\n\r\n        if(state){\r\n            var foundState = this.getState(state);\r\n\r\n            if(foundState){\r\n                foundState.entityList.push(object);\r\n                object.state = foundState;\r\n            }\r\n        }else{\r\n            this.entities.push(object);\r\n            object.state = this.currentState;\r\n        }\r\n\r\n        if(!renderFalse){\r\n            this.renderer.addToRenderer(object);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Jest.removeEntity()\r\n     * object entity, state Object\r\n     * Removes an entity from the update cycle and renderer, you can also specify the state you want to remove from\r\n     **/\r\n    removeEntity(object, state){\r\n        var entities = this.entities,\r\n            numEntities = entities.length;\r\n\r\n        if(state){\r\n            var foundState = this.getState(state);\r\n\r\n            if(foundState){\r\n                entities = foundState.entityList;\r\n                numEntities = entities.length;\r\n            }\r\n        }\r\n\r\n        var item = entities.indexOf(object);\r\n\r\n        if(typeof object.kill != 'undefined'){\r\n            object.kill();\r\n        }\r\n\r\n        entities.splice(item,1);\r\n\r\n        this.renderer.removeFromRenderer(object);\r\n    }\r\n\r\n    /**\r\n     * Jest.addState()\r\n     * object options\r\n     * {name : string}\r\n     * Adds a state the Jest, states hold their own entity list, and render list\r\n     **/\r\n    addState(name, enterState, exitState){\r\n        var stateObj = {};\r\n\r\n        if(name){\r\n            stateObj.name = name;\r\n        }else{\r\n            stateObj.name = this.states.length;\r\n        }\r\n\r\n        stateObj.enterState = enterState || undefined;\r\n\r\n        // assign it the next val\r\n        stateObj.id = this.states.length;\r\n        stateObj.renderList = [];\r\n        stateObj.entityList = [];\r\n        this.states.push(stateObj);\r\n    }\r\n\r\n    /**\r\n     * Jest.getState()\r\n     * object options\r\n     * {name : string, id : number}\r\n     * Finds and returns the state\r\n     **/\r\n    getState(options){\r\n        var foundState = false;\r\n\r\n        if(\"id\" in options){\r\n            foundState = this.states[options.id];\r\n        }else if(\"name\" in options){\r\n            var stateName = options.name;\r\n            for(var i = 0, len = this.states.length; i < len; i++){\r\n                if(this.states[i].name === stateName){\r\n                    foundState = this.states[i];\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return foundState;\r\n    }\r\n\r\n    /**\r\n     * Jest.switchState()\r\n     * object options\r\n     * {name : string, id : number}\r\n     * Adds a state the Jest, states hold their own entity list, and render list\r\n     **/\r\n    switchState(options){\r\n        var foundState = this.getState(options);\r\n\r\n        // throw in a debug if the state hasn't been found\r\n        if(foundState){\r\n            if(options.exitTransition && !options.exitComplete){\r\n                // perform exit transition if one exists\r\n                options.exitComplete = true;\r\n                Game.addEntity(new Jest.Transition(options.exitTransition, function(){Game.switchState(options);}));\r\n            }else{\r\n                // switch the render list, and the entity list\r\n                this.currentState = foundState;\r\n                this.renderer.renderList = this.currentState.renderList;\r\n                this.entities = this.currentState.entityList;\r\n\r\n                // if the state has an enter state function call it\r\n                if(foundState.enterState){\r\n                    foundState.enterState();\r\n                }\r\n\r\n                // Perform enter transition if one exists\r\n                if(options.enterTransition){\r\n                    Game.addEntity(new Jest.Transition(options.enterTransition));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Jest.checkHit(x,y)\r\n     * x,y number\r\n     * Checks all the entities to see if they were hit by the coords. Very expensive right now definitly need to clean it up\r\n     **/\r\n    checkHit(x,y){\r\n        var numEntities = this.entities.length,\r\n            entities = this.entities;\r\n\r\n        this.hitEntities = [];\r\n\r\n        for (var id  = 0,entLen = this.entities.length; id < entLen; id ++){\r\n            var object = entities[id];\r\n            if(object.live && object.clickable){\r\n                if(x > object.x && x < object.x + object.width && y > object.y && y < object.y + object.height){\r\n                    this.hitEntities.push(object);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}"],"sourceRoot":""}